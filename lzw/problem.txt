Написать функцию, выполняющую декодирование сжатых LZW данных (вариант из стандарта TIFF).

Прототип функции:
size_t lzw_decode(const uint8_t *in, size_t in_size, uint8_t *restrict out, size_t out_size);
Возвращаемое значение: количество декодированных байт или -1 при ошибке.

Оцениваться будет как правильность работы, так и скорость. Необходимо реализовать вариант, который никогда не выходит за указанные размеры буферов.

Дополнительно можно сделать вариант, предполагающий корректность входных данных или требующий буферы немного большего размера, чем необходимо, если это обеспечит существенное ускорение относительно первого варианта. В отдельном файле `lzw32fast.asm или lzw64fast.asm`, при запросе review необходимо описать, какие дополнительные требования вы ожидаете.

32-битный код (конвенция вызова cdecl) или 64-битный код (конвенция вызова fastcall64). Не забывайте сохранять нужные регистры, если вы их изменяете. Функция должна быть реализована в одном файле: lzw32.asm или lzw64.asm и не использовать каких-либо внешних функций (использовать свои дополнительные функции в том же файле – разрешается).

Разрешается использовать любые расширения команд x86, поддерживаемые процессорами архитектуры Skylake (стоит на сервере), если это даёт существенное ускорение. Если нужно что-то из более нового (вплоть до поддерживаемого Zen4) – спрашивайте.
