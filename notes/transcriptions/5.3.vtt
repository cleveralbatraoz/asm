WEBVTT

00:00.000 --> 00:10.600
Резолвить все импорты – это дорого, потому что их, а, много, б, они резолвятся медленно, и, ц, может, они не все нужны.

00:11.780 --> 00:17.840
Поэтому можно, ну, в некотором смысле, забить и отложить этот процесс.

00:18.880 --> 00:25.720
А именно, файл загружается, и он запускается на исполнение вот в таком состоянии.

00:25.720 --> 00:36.900
То есть он скомпилирован так, что у вас в год лежит адрес не вот этой вот функции, фу, а вот этой штуки.

00:39.700 --> 00:54.000
Вот эта штука запихивает на стэк индекс вот этого символа, фу, и переходит на еще один переходник.

00:54.700 --> 00:55.700
Этот переходник.

00:55.720 --> 01:09.820
Этот переходник запихивает на стэк индекс вашего модуля, и вот это происходит переход на специальную функцию загрузчика, который уже резолвит этот символ.

01:12.500 --> 01:18.840
И вот сюда записываем настоящий адрес, фу, ну, то есть он окажется вот этому.

01:20.200 --> 01:24.700
То есть это такая отложенная связь.

01:25.720 --> 01:34.400
Которая происходит не в момент загрузки вашего модуля, а в момент, когда вы на самом деле решили вызвать этот символ.

01:34.860 --> 01:36.900
А плюс 4 это то, что запущено?

01:36.900 --> 01:42.900
Потому что, нет, потому что вот этот год, он имеет три первых специальных символа.

01:44.920 --> 01:54.900
Там первые три символа, они имеют специальный смысл, а вот эти всякие пользовательские символы, они начинаются с четвертой позиции.

01:55.720 --> 01:59.480
Ну, это просто особенность построения кода.

01:59.840 --> 02:02.940
Ну, там индекс в таблице, это то, что мы запушили.

02:03.300 --> 02:05.320
Ну, почти.

02:06.440 --> 02:09.700
В индекс таблицы, не считая вот этих трех специальных значений.

02:10.520 --> 02:11.060
Вот так.

02:13.600 --> 02:20.480
То есть, при такой схеме, ваша динамическая библиотека, она грузится мгновенно,

02:20.480 --> 02:25.480
но как только вы пытаетесь обратиться к какому-то символу,

02:25.720 --> 02:33.480
который вот требует прохождения сквозь год, у вас оно лагает, потому что этот символ, на самом деле, резолвится.

02:36.480 --> 02:39.480
И такое было очень популярно раньше.

02:40.480 --> 02:47.480
Ну, потому что оно позволяло вам размазать вот этот долгий резолвинг по времени исполнения,

02:47.480 --> 02:51.980
и то, что не надо резолвить, то, что у вас не исполняется, оно вообще не будет резолвиться.

02:53.280 --> 02:53.780
Но!

02:53.840 --> 02:55.640
Эта картина сегодня не очень популярна.

02:55.640 --> 02:57.640
Кто-то гадается, почему?

03:02.640 --> 03:04.640
Нет, нет, все это по-прежнему работает.

03:04.640 --> 03:06.640
Я говорю, что оно не очень популярно.

03:12.640 --> 03:14.640
Security.

03:15.640 --> 03:17.640
Что означает данная картина?

03:17.640 --> 03:21.640
Данная картина означает, что вот эта таблица год,

03:21.640 --> 03:23.640
она должна быть доступна на 4 месяца.

03:23.640 --> 03:25.640
Она должна быть доступна на 4 месяца.

03:25.640 --> 03:29.640
Она должна быть доступна на все время исполнения вашего файлика.

03:30.640 --> 03:37.640
Потому что файлик, вот эта таблица, она постоянно переписывается непонятно в какие моменты времени.

03:38.640 --> 03:47.640
И с точки зрения Security, вот иметь такую табличку, которую вы можете легко переопределить на произвольное другое место,

03:47.640 --> 03:49.640
ну, это дыра к безопасности.

03:50.640 --> 03:52.640
По современным понятиям.

03:53.640 --> 03:57.640
Поэтому сегодня, как она называется?

04:00.640 --> 04:02.640
Релро, по-моему.

04:03.640 --> 04:04.640
Такая штука.

04:05.640 --> 04:06.640
Модно.

04:06.640 --> 04:11.640
Она заключается в том, что вы вот все эти хитрёни снимаете.

04:12.640 --> 04:18.640
У вас выглядит только вот так вот в ПЛТ.

